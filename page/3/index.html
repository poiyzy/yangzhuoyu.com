<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]<!-->
<html class="no-js" lang="en">
  <!--<![endif]-->
  <head>
    <meta charset="UTF-8">

    <title>
      Roy's Blog
    </title>

    <meta name="description" content="Nil">
    <meta name="keywords" content="Haha">
    <meta name="author" content="Roy Young">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="cleartype" content="on">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="57x57" href="/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="72x72" href="/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="114x114" href="/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="144x144" href="/apple-touch-icon-144x144-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">

    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">
    <link rel="shortcut icon" sizes="16x16" href="/favicon.ico">
    <link rel="alternate" type="application/rss+xml" title="Roy Young's Blog" href="/feed.xml" />
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/stylesheets/application.css?1395305141" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/application.js?1395305141" type="text/javascript"></script>

  </head>
  <body class="page page_3 page_3_index">
    <aside class="sidebar">
      <h1 class="site-name"><a href="/">Roy</a></h1>
      <nav class="global-nav">
        <ul>
          <li><a href="/">Posts</a></li>
          <li><a href="#TODO">Photos</a></li>
          <li><a href="/profile">Profile</a></li>
        </ul>        
      </nav>

      <nav class="social-connect">
        <ul>
          <li><a href="/rss.xml"><i class="icon-rss"></i></a></li>
          <li><a href="//twitter.com/poiyzy"><i class="icon-twitter"></i></a></li>
          <li><a href="//weibo.com/zhuoyuyang"><i class="icon-weibo"></i></a></li>
        </ul>
      </nav>

      <div class="block ad">
        <h4 class="block-title"><a href="//pragmatic.ly/">Fengche.co</a></h4>
        <p class="block-cnt">团队协作工具</p>
      </div>

    </aside>

    <section class="main">
      <div class="container">
        <div id="posts">
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/ruby-1-dot-9-2zhong-wen-zhi-chi-utf8">Ruby 1.9.2中文不支持UTF8报错invalid multibyte char (US-ASCII)</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Feb 20, 2012
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <p>在 <em>ruby</em> 程序中写入中文，执行报错：</p>
<div class="highlight"><pre>invalid multibyte char <span class="o">(</span>US-ASCII<span class="o">)</span>
</pre></div>
<p>最后发现是 <em>locale</em> 设置问题。</p>

<p>主要问题发生于 <em>Ruby 1.9</em> 中（上一篇文章中也有提到这个通用问题），<em>Ruby 1.9</em> 与之前版本相比较对于编码处理的差异很大，如写中文必须要在文件首行加入 <code># encoding: UTF-8</code> ，例如：</p>

<p>&ldquo;ruby test.rb</p>

<h1>encoding: UTF-8</h1>

<p>@test = &quot;这是一个测试&rdquo;
puts @test
&ldquo;</p>

<blockquote>
<p>参考：<a href="http://ihower.tw/rails3/installation.html">安裝Rails開發環境</a></p>
</blockquote>


  <p>
    ......
  </p>
  <p>
    <a href="/ruby-1-dot-9-2zhong-wen-zhi-chi-utf8">Read more →</a>
  </p>
</div>

    </article>
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/rails-3-dot-2-1zhong-bundle-installshi-jquery-railsbao-cuo">Rails 3.2.1中bundle Install时jquery-rails报错ArgumentError:invalid byte sequence in US-ASCII</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Feb 20, 2012
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <p>最近将 <em>Rails</em> 开发环境升级到 <em>Ruby 1.9.2</em> 和 <em>Rails 3.2.1</em> 后，执行 <code>bundle install</code> 时， <em>Jquery-rails</em> 报错：</p>
<div class="highlight"><pre><span class="s2">&quot;ArgumentError:invalid byte sequence in US-ASCII&quot;</span>
</pre></div>
<p>原因分析，由于 <em>locale</em> 设置错误。据了解，这是 <em>Ruby 1.9</em> 字符集设置时关于使用 <em>UTF-8</em> 通用问题。</p>

<h3>解决方法一：</h3>

<p>在 <em>Gemfile</em> 中加入如下代码：</p>

<p><code>ruby Gemfile
if RUBY_VERSION =~ /1.9/
  Encoding.default_external = Encoding::UTF_8
  Encoding.default_internal = Encoding::UTF_8
end
</code></p>

<h3>解决方法二：</h3>

<p>也可以在 <em>Shell</em> 中设置 <em>locale</em></p>

<p><strong>BASH</strong> 修改：</p>

<p>在 <em>~/.profile</em> 中或者在 <em>~/.bash_profile</em>中加入：</p>

<p><code>sh ~/.profile
export LC_ALL=zh_CN.UTF-8
export LANG=zh_CN.UTF-8
</code></p>

<p><strong>ZSH</strong> 修改：</p>

<p>在 <em>~/.zshrc</em> 中加入：</p>

<p><code>sh ~/.zshrc
export LC_ALL=zh_CN.UTF-8
export LANG=zh_CN.UTF-8
</code></p>

<blockquote>
<p>参考一：<a href="http://stackoverflow.com/questions/7095845/when-run-bundle-get-invalid-byte-sequence-in-us-ascii">When run bundle get invalid byte sequence in US-ASCII</a></p>
</blockquote>


  <p>
    ......
  </p>
  <p>
    <a href="/rails-3-dot-2-1zhong-bundle-installshi-jquery-railsbao-cuo">Read more →</a>
  </p>
</div>

    </article>
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/gityan-se-gao-liang">Git颜色高亮</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Feb 20, 2012
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <p>在 <em>Terminal</em> 中使用 <code>git status</code> 和 <code>git diff</code> 时，没有高亮，非常费眼，效率低。</p>

<p>可以在 <em>git</em> 中设置颜色高亮来解决这个问题。输入如下命令：</p>
<div class="highlight"><pre><span class="nv">$ </span>git config --global color.ui <span class="nb">true</span>
</pre></div>
<p>运行 <code>git status</code> 效果：</p>

<p><img alt="git_highlight" src="http://i.imgur.com/EuQZo.png" /></p>

<p>另外，关于git的学习，非常推荐的资源 <a href="http://progit.org/book/zh/"><em>ProGit 中文</em></a></p>

<blockquote>
<p>参考：<a href="http://progit.org/book/zh/ch1-5.html"><em>ProGit</em></a></p>
</blockquote>


  <p>
    ......
  </p>
  <p>
    <a href="/gityan-se-gao-liang">Read more →</a>
  </p>
</div>

    </article>
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/oh-my-zshzhong-wu-fa-qie-huan-rvmban-ben">oh-my-zsh中无法切换RVM版本</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Feb 19, 2012
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <p><strong>最近将 <em>Mac OS</em> 自带的 <em>bash</em> 换成了目前比较流行的 <a href="https://github.com/robbyrussell/oh-my-zsh"><em>Oh-my-zsh</em></a>，但是在使用了一些主题以后，发现 <em>RVM</em> 无法切换版本。</strong></p>

<p>解决方法如下：</p>

<p>在 <code>.zshrc</code> 最后加上如下代码：</p>

<p><code>sh .zshrc
[[ -s &quot;$HOME/.rvm/scripts/rvm&quot; ]] &amp;&amp; . &quot;$HOME/.rvm/scripts/rvm&quot;
</code></p>

<blockquote>
<p>参考：<a href="http://stackoverflow.com/questions/4755538/rvm-is-not-working-in-zsh">RVM is not working in ZSH</a></p>
</blockquote>


  <p>
    ......
  </p>
  <p>
    <a href="/oh-my-zshzhong-wu-fa-qie-huan-rvmban-ben">Read more →</a>
  </p>
</div>

    </article>
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/shi-yong-powyun-xing-sinatra">使用pow运行sinatra</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Dec 05, 2011
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <p>今天想拿 <em><a href="http://www.sinatrarb.com/intro">Sinatra</a></em> 这个轻量级的 <em>web</em> 框架练练手，写个小程序，可是使用 <code>ruby myapp.rb</code> 运行非常的麻烦。所以想到用 <em>Rails</em> 推荐的 <em><a href="http://pow.cx/">Pow</a></em> 来跑。</p>

<p>在 <em><a href="http://www.sinatrarb.com/intro">Sinatra</a></em> 建立的 <em>app</em> 文件根目录下建立 <em>config.ru</em> 。</p>

<p>&ldquo;sh config.ru
require &quot;rubygems&rdquo; #必须要写，不然pow报错
require &ldquo;./myapp&rdquo; #要运行的文件，相当于index，这里是myapp.rb</p>

<p>run Sinatra::Application
&ldquo;</p>

<blockquote>
<p>参考：<a href="https://github.com/37signals/pow/issues/38">传送门</a></p>
</blockquote>


  <p>
    ......
  </p>
  <p>
    <a href="/shi-yong-powyun-xing-sinatra">Read more →</a>
  </p>
</div>

    </article>
  

  
    <ul class="pager">
      
        <li class="next"><a href="/page/4">Older &rarr;</a></li>
      
      
        <li class="previous"><a href="/page/2">&larr; Newer</a></li>
      
    </ul>
  
</div>
      </div>
    </section>
    
    <footer>
      <div class="copyright">
        <p>&copy;2013 Roy</p>
      </div>
    </footer>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-44777679-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </body>
</html>
