<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" lang="en"><![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" lang="en"><![endif]-->
<!--[if gt IE 8]<!-->
<html class="no-js" lang="en">
  <!--<![endif]-->
  <head>
    <meta charset="UTF-8">

    <title>
      Roy's Blog
    </title>

    <meta name="description" content="Nil">
    <meta name="keywords" content="Haha">
    <meta name="author" content="Roy Young">

    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta http-equiv="cleartype" content="on">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">

    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="57x57" href="/apple-touch-icon-57x57-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="72x72" href="/apple-touch-icon-72x72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="114x114" href="/apple-touch-icon-114x114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" type="image/png" sizes="144x144" href="/apple-touch-icon-144x144-precomposed.png" />
    <link rel="apple-touch-icon-precomposed" type="image/png" href="/apple-touch-icon-precomposed.png">
    <link rel="apple-touch-icon" type="image/png" href="/apple-touch-icon.png">

    <link rel="icon" type="image/png" sizes="16x16" href="/favicon.png">
    <link rel="shortcut icon" sizes="16x16" href="/favicon.ico">
    <link rel="alternate" type="application/rss+xml" title="Roy Young's Blog" href="/feed.xml" />
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <link href="/stylesheets/application.css?1386047725" media="screen" rel="stylesheet" type="text/css" />
    <script src="/javascripts/application.js?1386047724" type="text/javascript"></script>

  </head>
  <body class="page page_2 page_2_index">
    <aside class="sidebar">
      <h1 class="site-name"><a href="/">Roy</a></h1>
      <nav class="global-nav">
        <ul>
          <li><a href="/">Posts</a></li>
          <li><a href="#TODO">Photos</a></li>
          <li><a href="/profile">Profile</a></li>
        </ul>        
      </nav>

      <nav class="social-connect">
        <ul>
          <li><a href="/rss.xml"><i class="icon-rss"></i></a></li>
          <li><a href="//twitter.com/poiyzy"><i class="icon-twitter"></i></a></li>
          <li><a href="//weibo.com/zhuoyuyang"><i class="icon-weibo"></i></a></li>
        </ul>
      </nav>

      <div class="block ad">
        <h4 class="block-title"><a href="//pragmatic.ly/">Pragmatic.ly</a></h4>
        <p class="block-cnt">团队协作工具</p>
      </div>

    </aside>

    <section class="main">
      <div class="container">
        <div id="posts">
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/reading-plan">Reading Plan</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Jun 07, 2013
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <h3>The books I have read</h3>

<ul>
<li><a href="http://www.amazon.com/Well-Grounded-Rubyist-David-Black/dp/1933988657">The Well-Grounded Rubyist</a></li>
<li><a href="http://www.amazon.com/Eloquent-Ruby-Addison-Wesley-Professional-Series/dp/0321584104/ref=sr_1_sc_1?s=books&ie=UTF8&qid=1370579591&sr=1-1-spell&keywords=eloqunt+ruby">Eloquent Ruby</a></li>
<li><a href="http://www.amazon.com/Design-Patterns-Ruby-Russ-Olsen/dp/0321490452/ref=sr_1_1?s=books&ie=UTF8&qid=1370579706&sr=1-1&keywords=design+patterns+in+ruby">Design Patterns in Ruby</a></li>
<li><a href="http://www.amazon.com/Practical-Object-Oriented-Design-Ruby-Addison-Wesley/dp/0321721330/ref=sr_1_sc_2?s=books&ie=UTF8&qid=1370579591&sr=1-2-spell&keywords=eloqunt+ruby">Practical Object-Oriented Design in Ruby</a></li>
<li><a href="http://www.amazon.com/Metaprogramming-Ruby-Program-Like-Pros/dp/1934356476/ref=sr_1_1?s=books&ie=UTF8&qid=1370579648&sr=1-1&keywords=metaprogramming+ruby">Metaprogramming Ruby</a></li>
</ul>


  <p>
    ......
  </p>
  <p>
    <a href="/reading-plan">Read more →</a>
  </p>
</div>

    </article>
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/spine-mobile-events">Spine Mobile --- Events</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Jun 28, 2012
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <h3>300ms click event</h3>

<p>一个手机开发人员经常会出的错误是使用 <em>click</em> 事件。正确的做法：<strong>不要使用 click event</strong>。 因为 <em>Mobile Safari</em> 会有300毫秒的延迟来判定是否为点击操作还是可能有后续操作。</p>

<h3>tap</h3>

<p>使用 <strong>tap</strong> 来代替 <strong>click</strong>。</p>

<p>直接使用 <strong>tap</strong> 来代替 <strong>click</strong> 事件：</p>
<div class="highlight"><pre><span class="kr">class</span> <span class="nx">ContactsList</span> <span class="kr">extends</span> <span class="nx">Panel</span>
  <span class="err">#</span><span class="nx">Replace</span> <span class="s1">&#39;click&#39;</span> <span class="kd">with</span> <span class="s1">&#39;tap&#39;</span>
  <span class="nx">events</span><span class="o">:</span>
    <span class="s1">&#39;tap .item&#39;</span><span class="o">:</span> <span class="s1">&#39;select&#39;</span>

  <span class="nx">select</span><span class="o">:</span> <span class="p">(</span><span class="nx">e</span><span class="p">)</span> <span class="o">-&gt;</span>
    <span class="nx">item</span> <span class="o">=</span> <span class="nx">$</span><span class="p">(</span><span class="nx">e</span><span class="p">.</span><span class="nx">target</span><span class="p">).</span><span class="nx">item</span><span class="p">()</span>
    <span class="err">@</span><span class="nx">navigate</span><span class="p">(</span><span class="s1">&#39;/contacts&#39;</span><span class="p">,</span> <span class="nx">item</span><span class="p">.</span><span class="nx">id</span><span class="p">,</span> <span class="nx">trans</span><span class="o">:</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>
</pre></div>
<p>当用户的手不离开的时候这个事件将不会被激活，同样这个事件可以被手指滑动所取消。</p>

<blockquote>
<p><a href="http://spinejs.com/mobile/docs/events">Events</a></p>
</blockquote>


  <p>
    ......
  </p>
  <p>
    <a href="/spine-mobile-events">Read more →</a>
  </p>
</div>

    </article>
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/spine-mobile-transitions">Spine Mobile --- Transitions</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Jun 28, 2012
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <h3>Activating Panels</h3>

<p>激活 <em>Panels</em> ，正如我们在之前在<a href="/blog/2012/06/28/spine-mobile-stage-and-panel-controllers/">关于Controller</a>中使用 <code>active()</code> 函数完成。</p>
<div class="highlight"><pre><span class="nx">calss</span> <span class="nx">ContactsList</span> <span class="kr">extends</span> <span class="nx">Panel</span>
  <span class="err">#</span> <span class="p">...</span>

<span class="nx">list</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">ContactsList</span>
<span class="nx">list</span><span class="p">.</span><span class="nx">active</span><span class="p">()</span>
</pre></div>
<p>默认情况下，它将不使用任何 <em>transitions</em> , 只是简单的显示 <em>controller</em> 。使用 <em>transition</em> , 需要把 <code>trans</code> 传入到 <code>active()</code> :</p>
<div class="highlight"><pre><span class="err">#</span> <span class="nx">Transition</span> <span class="k">in</span> <span class="nx">form</span> <span class="nx">left</span>
<span class="nx">list</span><span class="p">.</span><span class="nx">active</span><span class="p">(</span><span class="nx">trans</span><span class="o">:</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>

<span class="err">#</span> <span class="nx">Or</span><span class="p">,</span> <span class="nx">transition</span> <span class="k">in</span> <span class="nx">from</span> <span class="nx">right</span>
<span class="nx">list</span><span class="p">.</span><span class="nx">active</span><span class="p">(</span><span class="nx">trans</span><span class="o">:</span> <span class="s1">&#39;right&#39;</span><span class="p">)</span>
</pre></div>
<p>目前只支持两种 <em>transition</em> ，<strong>left</strong> 和 <strong>right</strong> 。</p>

<h3>Routes</h3>

<p><em>Panels</em> 经常由 <em>routes</em> 激活。<em>Spine</em> 允许传入一个自定的对象作为 <code>@navigate()</code> 的最后一个参数来激活 <em>routes</em> 。</p>
<div class="highlight"><pre><span class="err">@</span><span class="nx">navigate</span><span class="p">(</span><span class="s1">&#39;/contacts&#39;</span><span class="p">,</span> <span class="nx">trans</span><span class="o">:</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>
</pre></div>
<p><code>{trans: &#39;left&#39;}</code> 然后将会被传入到 <em>route callback</em> 。</p>
<div class="highlight"><pre><span class="err">@</span><span class="nx">routes</span>
  <span class="s1">&#39;/contacts&#39;</span><span class="o">:</span> <span class="p">(</span><span class="nx">params</span><span class="p">)</span> <span class="o">-&gt;</span>
    <span class="nx">assertEqual</span><span class="p">(</span> <span class="nx">params</span><span class="p">.</span><span class="nx">trans</span><span class="p">,</span> <span class="s1">&#39;left&#39;</span><span class="p">)</span>
</pre></div>

  <p>
    ......
  </p>
  <p>
    <a href="/spine-mobile-transitions">Read more →</a>
  </p>
</div>

    </article>
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/spine-mobile-stage-and-panel-controllers">Spine Mobile --- Stage &amp; Panel Controllers</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Jun 28, 2012
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <h2>Stage &amp; Panel Controllers</h2>

<p>关于 <em>Stage</em> 和 <em>Panel</em>。<em>Stage</em> 是平台，<em>Panel</em> 是其中的面板。<em>Stage</em> 覆盖整个可见区域，而 <em>Panel</em> 则只覆盖应用的 <strong>header</strong> 和 <strong>content</strong>。一个应用通常将会同时显示 <em>Stage</em> 和 <em>Panel</em>。</p>

<h3>Stage</h3>

<p><em>Stage</em> 包含元素： 一个 <strong>header</strong>，一个 <strong>article</strong> 和一个 <strong>footer</strong>。</p>

<p>像这个样子：
<code>html
&lt;body class=&quot;stage&quot;&gt;
  &lt;header&gt;&lt;/header&gt;
  &lt;article class=&quot;viewport&quot;&gt;&lt;/article&gt;
  &lt;footer&gt;&lt;/footer&gt;
&lt;/body&gt;
</code></p>

<p><strong>Spine Mobile</strong> 包括一些默认的 <strong>CSS</strong></p>

<ul>
<li>设置整体的宽度和高度为 100%</li>
<li><strong>header</strong> 放置在 <em>stage</em> 的顶部。</li>
<li><strong>footer</strong> 放置在 <em>stage</em> 的底部。</li>
<li><strong>article</strong> 被放置在 <em>stage</em> 的顶部和底部。</li>
</ul>

<p><em>Stage</em> 的布局</p>

<p><img alt="Stage layout" src="https://lh3.googleusercontent.com/-R5HgKL4wur0/TnYhHvxKsZI/AAAAAAAABYE/-VErIKpG4iw/s640/Screen%252520Shot%2525202011-09-18%252520at%25252016.59.51.png" /></p>

<p>此图中 <strong>header</strong> 为空，所以 <strong>content</strong> 包含了 <strong>header</strong> 部分。</p>

<p>每一个应用建立的时候都会创建一个全域的 <em>Stage</em>， 应用的所有 <em>panel</em> 都会被加入其中。它通常会设置为 <em>body</em> 元素。</p>


  <p>
    ......
  </p>
  <p>
    <a href="/spine-mobile-stage-and-panel-controllers">Read more →</a>
  </p>
</div>

    </article>
  
    <article class="post">
      <header>
  <h2 class="title">
    <a href="/ruby-1-dot-9-2zhong-wen-zhi-chi-utf8">Ruby 1.9.2中文不支持UTF8报错invalid multibyte char (US-ASCII)</a>
  </h2>
</header>

<aside class="aside-block">
  <ul class="meta">
    <!-- <li class="author-photo">
      <a href="http://yangzhuoyu.com">
        <img src="/images/zhuoyu-yang.png?1381549113" />
      </a>
    </li>
    <li class="author">
     by Roy Young
    </li> -->
    <li class="date">
      Feb 20, 2012
    </li>
    <li class="tags">
      
    </li>
  </ul>
</aside>

<div class="content">
  <p>在 <em>ruby</em> 程序中写入中文，执行报错：</p>
<div class="highlight"><pre>invalid multibyte char <span class="o">(</span>US-ASCII<span class="o">)</span>
</pre></div>
<p>最后发现是 <em>locale</em> 设置问题。</p>

<p>主要问题发生于 <em>Ruby 1.9</em> 中（上一篇文章中也有提到这个通用问题），<em>Ruby 1.9</em> 与之前版本相比较对于编码处理的差异很大，如写中文必须要在文件首行加入 <code># encoding: UTF-8</code> ，例如：</p>

<p>&ldquo;ruby test.rb</p>

<h1>encoding: UTF-8</h1>

<p>@test = &quot;这是一个测试&rdquo;
puts @test
&ldquo;</p>

<blockquote>
<p>参考：<a href="http://ihower.tw/rails3/installation.html">安裝Rails開發環境</a></p>
</blockquote>


  <p>
    ......
  </p>
  <p>
    <a href="/ruby-1-dot-9-2zhong-wen-zhi-chi-utf8">Read more →</a>
  </p>
</div>

    </article>
  

  
    <ul class="pager">
      
        <li class="next"><a href="/page/3">Older &rarr;</a></li>
      
      
        <li class="previous"><a href="/">&larr; Newer</a></li>
      
    </ul>
  
</div>
      </div>
    </section>
    
    <footer>
      <div class="copyright">
        <p>&copy;2013 Roy</p>
      </div>
    </footer>

    <script type="text/javascript">

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-44777679-1']);
      _gaq.push(['_trackPageview']);

      (function() {
        var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
        ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
        var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
      })();

    </script>
  </body>
</html>
